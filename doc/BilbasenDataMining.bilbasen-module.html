<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>BilbasenDataMining.bilbasen</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        Package&nbsp;BilbasenDataMining ::
        Module&nbsp;bilbasen
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="BilbasenDataMining.bilbasen-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module bilbasen</h1><p class="nomargin-top"><span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html">source&nbsp;code</a></span></p>
<p>Bilbasen module</p>
  <p>This module handles all communication with bilbasen.dk, and it 
  contains functions to communicate with bilbasen.dk as well as functions 
  to download data from bilbasen.dk. The main part of the module runs the 
  method download_data_to_database which is the most important method of 
  the module, as this is where bilbasen.dk is crawled and the data is 
  parsed and saved in a database.</p>

<!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Classes</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Classes"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="BilbasenDataMining.bilbasen.Car-class.html" class="summary-name">Car</a><br />
      Car(model, link, description, kms, year, hk, kml, kmt, moth, 
        trailer, location, price)
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="connect"></a><span class="summary-sig-name">connect</span>()</span><br />
      This method returns a httplib connection to bilbasen.dk</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#connect">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="BilbasenDataMining.bilbasen-module.html#extract_car_info" class="summary-sig-name">extract_car_info</a>(<span class="summary-sig-arg">listing_type</span>,
        <span class="summary-sig-arg">listing</span>)</span><br />
      This method is used by the method download_data_to_database() and 
      extracts data from a html listing.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#extract_car_info">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_date"></a><span class="summary-sig-name">get_date</span>()</span><br />
      This method returns the current date</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#get_date">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_car_image_src"></a><span class="summary-sig-name">get_car_image_src</span>(<span class="summary-sig-arg">link</span>)</span><br />
      Given a link to a car description page, this method returns a link to
      an image of the car.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#get_car_image_src">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="BilbasenDataMining.bilbasen-module.html#create_car_brand_table" class="summary-sig-name">create_car_brand_table</a>(<span class="summary-sig-arg">conn</span>)</span><br />
      This method crawls bilbasen.dk for a list of car brands, and creates 
      and stores these brands in a table called 'Brands' in the database.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#create_car_brand_table">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="insert_car_to_table"></a><span class="summary-sig-name">insert_car_to_table</span>(<span class="summary-sig-arg">car</span>,
        <span class="summary-sig-arg">tablename</span>,
        <span class="summary-sig-arg">cursor</span>)</span><br />
      This method takes as input a namedtuple Car, a name of a table in the
      database and a cursor to the database, and inserts the car into the 
      given table.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#insert_car_to_table">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="BilbasenDataMining.bilbasen-module.html#download_data_to_database" class="summary-sig-name">download_data_to_database</a>(<span class="summary-sig-arg">limit</span>=<span class="summary-sig-default">None</span>)</span><br />
      This method is the most important one of this module, as this is the 
      one crawling bilbasen.dk to extract data of cars currently on sale.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#download_data_to_database">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="BilbasenDataMining.bilbasen-module.html#main" class="summary-sig-name">main</a>()</span><br />
      Main method which will run by a command 'python bilbasen.py arg', 
      where arg is the number of pages to crawl.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#main">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'BilbasenDataMining'"><code class="variable-quote">'</code><code class="variable-string">BilbasenDataMining</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="extract_car_info"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">extract_car_info</span>(<span class="sig-arg">listing_type</span>,
        <span class="sig-arg">listing</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#extract_car_info">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This method is used by the method download_data_to_database() and 
  extracts data from a html listing. The data extracted is all the 
  attributes on a car given on a search result site, which is: model, link 
  to detailed page, description, how many km it has done, which year it is 
  from, how many horsepowers it has, how many km per liter it does, how 
  fast it goes from 0-100 km/t, what the monthly cost is, if it can pull a 
  trailer, and a location. The method saves this data in the namedtupe Car 
  and returns that tuple.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="create_car_brand_table"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">create_car_brand_table</span>(<span class="sig-arg">conn</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#create_car_brand_table">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This method crawls bilbasen.dk for a list of car brands, and creates 
  and stores these brands in a table called 'Brands' in the database. The 
  method is called each time the method download_data_to_database is 
  called.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="download_data_to_database"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">download_data_to_database</span>(<span class="sig-arg">limit</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#download_data_to_database">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This method is the most important one of this module, as this is the 
  one crawling bilbasen.dk to extract data of cars currently on sale. The 
  method creates a new table each time it is called, and the table will be 
  named 'AllBrandsDDMMYY', where DDMMYY is the current date. If the table 
  already exist, it will be deleted. The method takes an optional 
  parameter, defining how many pages to crawl. If no parameter is given, it
  crawls all pages (i.e. all cars) on bilbasen.dk</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="main"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">main</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="BilbasenDataMining.bilbasen-pysrc.html#main">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Main method which will run by a command 'python bilbasen.py arg', 
  where arg is the number of pages to crawl. Do not provide any argument if
  all pages should be crawled.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Dec  4 14:02:10 2014
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
